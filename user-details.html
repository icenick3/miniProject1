<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="user-Information"></div>
<ul class="posts-box"></ul>
<script>
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const id = urlParams.get('id');
    fetch(`https://jsonplaceholder.typicode.com/users/${id}`)
        .then(response => response.json())
            .then(user => {
                let userInformation = document.getElementsByClassName('user-Information')[0];
                let divInformation = document.createElement('div');
                divInformation.innerHTML = `Username: ${user.username} </br> Email: ${user.email} </br> Street: ${user.address.street} </br> Suite: ${user.address.suite} </br> City: ${user.address.city} </br> Zipcode: ${user.address.zipcode} </br> Geolocation: ${user.address.geo.lat} ${user.address.geo.lng}`;
                userInformation.append(divInformation);
                let detailsBtn = document.createElement('button');
                detailsBtn.innerText = 'Post of current user';
                detailsBtn.onclick = function () {
                    fetch(`https://jsonplaceholder.typicode.com/users/${id}/posts`)
                    .then(value => value.json())
                    .then(value => {
                        let postsBox = document.getElementsByClassName('posts-box')[0];
                        postsBox.innerHTML = '';
                      for (const post of value){
                          let postsBtn = document.createElement('button');
                          postsBtn.innerText = 'POST DETAILS';
                          postsBtn.onclick = function (){
                              document.location = `post-details.html?id=${user.id}`

                          }
                          let liPosts = document.createElement('li');
                          liPosts.className = 'posts';
                          liPosts.innerText = post.title;
                          postsBox.append(liPosts);
                          liPosts.append(postsBtn);

                      }


                    });

                };
                        userInformation.append(detailsBtn)


        });


</script>
</body>
</html>